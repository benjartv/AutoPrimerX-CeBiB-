<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="Microorganismos"></h:outputText>
        </ui:define>
        <h:head>
 
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
        </h:head>
        <ui:define name="body">

            <h:body>
                <div>
                    <h:form enctype="multipart/form-data" prependId="false">
                        <p:messages autoUpdate="true"/>
                        <p:growl  showDetail="true" sticky="true" /> 
                        <p:panel id="pnl" styleClass="no-border">
                            <div class="row form-group">
                                <h1 class="col-md-offset-1">Microorganismos</h1>
                                <div class="col-md-4 col-md-offset-1">
                                    <p:outputLabel styleClass="form-label" value="Ingrese las secuencias alineadas para la búsqueda de consensos" for="input-file"/>
                                    <p:fileUpload id="input-file" value="#{primerG3.file}" mode="simple" required="true" requiredMessage="Debe seleccionar un archivo"/>
                                
                                    <p:outputLabel styleClass="form-label" value="Seleccione un organismo" for="usodecodon" /> 
                                    <div>
                                        <p:selectOneMenu id="usodecodon" value="#{codonUsageController.selected}" required="true" requiredMessage="Es necesario seleccionar un uso de condon" panelStyle="width:180px" 
                                                     effect="fade" style="width:160px" filter="true" filterMatchMode="startsWith"  >
                                            <f:selectItem itemLabel="Ninguno" noSelectionOption="true" itemDisabled="true"/>
                                            <f:selectItems value="#{codonUsageController.itemsAvailableSelectOne}"
                                                           var="pacienteItem"
                                                           itemValue="#{codonUsageItem}"/>
                                            <p:ajax update="codonUsageBtn"/>

                                        </p:selectOneMenu>
                                    </div>
                                    <div>
                                        <p:button outcome="/codonUsage/List" value="Agregar Organismo" icon="ui-icon-plus" ></p:button>
                                        <p:commandButton action="#{primerG3.submitprob(codonUsageController.selected)}" id="codonUsageBtn" immediate="true" ajax="true"  icon="ui-icon-pencil" value="Probabilidades" update=":CodonUsageProbForm" oncomplete="PF('CodonUsageProbDlg').show()" disabled="#{empty codonUsageController.selected}"/>
                                    </div>                                    
                                    
                                    <p:outputLabel styleClass="form-label" value="Ingrese la tolerancia para aminoácidos conservados" for="conservado" /> 
                                    <p:inputText type="number" id="conservado" value="#{primerG3.conservado}" required="true" requiredMessage="Debe ingresar la tolerancia para aminoácidos conservados" />
                                    
                                    <p:outputLabel styleClass="form-label" value="Ingrese la tolerancia para aminoácidos idénticos" for="identico" />
                                    <p:inputText type="number" id="identico" value="#{primerG3.identico}" required="true" requiredMessage="Debe ingresar la tolerancia para aminoácidos idénticos" />
                                    <br/>
                                    
                                    <p:outputLabel styleClass="form-label" value="Ingrese el tamaño de la región conservada" for="tamanoPrimer" />
                                    <p:inputText type="number" id="tamanoPrimer" value="#{primerG3.tamanoPrimer}" required="true" requiredMessage="Debe ingresar el tamaño de la región conservada"/>
                                    
                                    <br/>
                                    <br/>
                                    <div class="row">
                                        <div id="errorMsge" class="col-md-12 alert alert-danger hidden" role="alert">
                                            <p>
                                                La tolerancia para aminoácidos conservados debe ser mayor que la tolerancia para aminoácidos idénticos
                                            </p>
                                        </div>
                                        <div class="col-md-offset-9">
                                            <p:commandButton id="submit" value="Envíar" update="nucleotidos" actionListener="#{primerG3.submit(codonUsageController.selected)}" ajax="false" onclick="PF('block').show()" oncomplete="PF('block').hide()"/>                                                                                
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4" >
                                    <p:outputLabel styleClass="form-label" value="Sitios conservados" />
                                    <hr/>
                                    <p:dataList id="nucleotidos" styleClass="no-border" value="#{primerG3.secuenciasNucleotidos}" var="seq" emptyMessage="" type="ordered">
                                        #{seq}
                                    </p:dataList>
                                </div>
                            </div>

                        </p:panel>
                         
                        <p:blockUI block="pnl" widgetVar="block">
                            <p id="loading">Cargando</p>
                            <p:graphicImage library="images" name="loader.gif"/>
                        </p:blockUI>
                    </h:form>   
                </div>

                <br />
                <h:panelGrid columns="2" cellpadding="5">
                    <br/>
                    <h:outputText id="answer" value="#{primerG3.log}" />
                </h:panelGrid>


            </h:body>
            <ui:include src="codonUsage.xhtml"/>
            
        </ui:define>

    </ui:composition>
</html>
